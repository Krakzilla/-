<!doctype html>
<html lang="de" {height: 100%;}>
<head>
  <meta name="viewport" charset="utf-8" content=height=device-height, initial-scale=1.0, initial-scale=1, maximum-scale=1/>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <title>Fun Times</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet"> 
  <style>
   
  </style>
</head>
<body {margin: 0; height: 100%; overflow: hidden; } onload="startGame()" style="background-color:rgb(255, 255, 255);">

<div>
<p id="oben">Ich glaub es geht los.</p>
  <div class="top">
  </div>
  <img class="figur" id="figur" src="room1.jpg">
 <div class="textbox">
  <p2 id="box" >( ._. )</p2>
  <br>
  <button id="butt" class="weiter" onclick="weiter()">>>></button>   
 </div>
 <!<img class="backgrounds" src="picbg1.png" width: 100%; height: 100%;>->
</div>

<div id="popUp" class="modal">
  <div class="modal-content">
    <p id="popUpTitle">What do you do?</p>
    <button id="choice1" class="choice" onclick="skip(1)">
    <button id="choice2" class="choice" onclick="skip(2)">
    <button id="choice3" class="choice" onclick="skip(3)">
  </div>
</div>

<script>
  document.getElementById("oben").innerHTML = window.innerWidth+" "+window.innerHeight;

  let chapter = 1;
  let regie = [7,6,6,6,2,41,3,3,1,31];
  let inhalt = ["Well hello there! ", " Huh?", " Get that can outta here!"," right"," now!!!", 0,0,0,"hi svea"];
  let regienummer = [0];
  let choices = [3, "first answer", "Fine", "Third answer", 7,6,6];
   /* die choicestarts: 0, 7, 10 */

if (chapter  == 1) {
regie = [7,6,6,2,41,1,5,1,1,41];
inhalt = [0, "ABER HALLO!", " Du willst doch bestimmt bei einer kleinen Umfrage mitmachen, hab ich recht?"," Hab ich?",1, "Dachte ich mir! LOS GEHT'S!",7,"Was? Wie gemein :( Hey ich bin so suaer auf dich, ich spam dich jetzt voll. Mann. Also echt, wie kannst du es wagen???? Du fette Sau. Du stinkst. Bäh. So äh... was soll ich denn noch sagen? Ah ich weiß was! HEHEHEHHE, HEGUIOSHGIHk hifiosehonohfsi eongoensgi4 75z02395 7zhtesojg eh89w s8m3v nz5wp9snc8twgem vlntw9 h8dtgv nse9n68tuj.   .   .   . Na, wie gefällt dir das?", "Tschüsselchen",1];
choices = ["Hab ich recht?",2, "Jaaaa", "Neeneenee", 5,7,"Bist du immer noch hier?",3,"Yuppi","Yappi","Yoppi"];
}

  var choicestart = 0
  var i = 0
  var txt = "nix";
  const speed = 15;

  function type() {
   if (i < txt.length) {
     document.getElementById("box").innerHTML += txt.charAt(i);
     i++;
     setTimeout(type, speed);
   } else {
    if (regie[regienummer] == 6) {setTimeout(weiter, 800);} 
    else {document.getElementById("butt").disabled = false; document.getElementById("butt").style.opacity = 100; }
   }
  }

  function clearText() {
    document.getElementById("box").innerHTML = "" ;
  }
  function writeText() {
    document.getElementById("butt").style.opacity = 0;
    document.getElementById("butt").disabled = true;
    i = 0;
    type();
  }

  function weiter() {
    document.getElementById("oben").innerHTML = regienummer /*regie[regienummer]*/;
  if (regie[regienummer] == 1) {
    txt = inhalt[regienummer];
    document.getElementById("box").innerHTML = "" ;
    writeText();
  } else {
    if (regie[regienummer] == 2) {
      txt = inhalt[regienummer];
    writeText();
    } else { 
      if (regie[regienummer] == 3){
      document.getElementById('figur').src='';
      txt = inhalt[regienummer]; writeText();
    } else {
     if (regie[regienummer] == 5) {
      regienummer = inhalt[regienummer]; setTimeout(weiter, 0);
     } else {
     if (regie[regienummer] == 41) {
     fun();
     }
    else {
      if (regie[regienummer] == 31) {
        document.getElementById('figur').src='t2.png';
      }
      else { if (regie[regienummer] == 6) {txt = inhalt[regienummer]; writeText();}
      else { if (regie[regienummer] == 7) {document.getElementById("box").innerHTML = ""; setTimeout(weiter, 0);}} 
    }
    }} 
  }}}
  regienummer ++;
}

var modal = document.getElementById("popUp");
/*Popup anzeigen und Wahlmöglichkeiten zuordnen, sichtbar/unsichtbar machen*/
function fun() {
modal.style.display = "block";
choicestart = inhalt[regienummer];
document.getElementById("popUpTitle").innerHTML = choices[choicestart-1];
document.getElementById("choice1").innerHTML = choices[choicestart+1];
  document.getElementById("choice2").style.display = "none"; document.getElementById("choice3").style.display = "none";
  if (choices[choicestart]>1) {
document.getElementById("choice2").innerHTML = choices[choicestart+2]; document.getElementById("choice2").style.display = "block";
if (choices[choicestart]>2) {
document.getElementById("choice3").innerHTML = choices[choicestart+3]; document.getElementById("choice3").style.display = "block";
}}}

function skip(path){
 /*document.write(path)*/
 extra = (choices[choicestart])+choicestart+path;
 regienummer = choices[extra];
 modal.style.display = "none";
 weiter(); 
}

function autoweiter(){
  weiter();
}
</script>
</body>
</html>
