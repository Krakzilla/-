<!doctype html>
<html lang="de" {height: 100%;}>
<head>
  <meta name="viewport" charset="utf-8" content=height=device-height, initial-scale=1.0, initial-scale=1, maximum-scale=1/>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <title>Fun Times</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet"> 
  <style>
   
  </style>
</head>
<body {margin: 0; height: 100%; overflow: hidden; } onload="startGame()" style="background-color:rgb(167, 245, 255);">

<div>
<p id="oben">Ich glaub es geht los.</p>
 <div class="stage">
  <img class="backgrounds" src="feet.jpg" width: 100%; height: 100%;>
  <img class="figur" id="figur" src="sprite.png";>
</div>
 <div class="textbox">
  <p2 id="box" >( ._. )</p2>
   <p><style>position: sticky;
    bottom:1px;
    color:black;
    border-radius: 3px;
    background: rgb(184, 221, 175);
    border: 5px solid black;</style></p>
     <button id="butt" class="weiter" onclick="weiter()">>>></button>
   
 </div></div>

<div id="popUp" class="modal">
  <div class="modal-content">
    <p id="popUpTitle">What do you do?</p>
    <button id="choice1" class="choice" onclick="skip(1)">
    <button id="choice2" class="choice" onclick="skip(2)">
    <button id="choice3" class="choice" onclick="skip(3)">
  </div>
</div>

<script>
  document.getElementById("oben").innerHTML = window.innerWidth+" "+window.innerHeight;

  let regie = [7,6,2,1,2,41,1,1,3,31];
  let inhalt = ["Well hello there! ", " Huh?", " Oh no! Someone left their delicious sprite here"," What are you gonna do with it now"," ???", 0,"Wait, you can't just leave it here! I'll take it",0,"Mhm. Tastes like Bratwurst","Du trinkst die sprite und stibrst, ENDE"];
  let regienummer = [0];
  let choices = [3, "Take sprite", "Leave sprite there", "Ask for weather", 6,7,7];
  let startpunktefürchoices = [0, 7, 10];

  var choicestart = 0
  var i = 0
  var txt = "nix";
  const speed = 15;

  function type() {
   if (i < txt.length) {
     document.getElementById("box").innerHTML += txt.charAt(i);
     i++;
     setTimeout(type, speed);
   } else {
    if (regie[regienummer-1] != 6) {document.getElementById("butt").disabled = false;}
   }
  }

  function clearText() {
    document.getElementById("box").innerHTML = "" ;
  }
  function writeText() {
    document.getElementById("butt").style.background="white";
    document.getElementById("butt").disabled = true;
    i = 0;
    type();
  }

  function weiter() {
    document.getElementById("oben").innerHTML = regienummer /*regie[regienummer]*/;
  if (regie[regienummer] == 1) {
    txt = inhalt[regienummer];
    document.getElementById("box").innerHTML = "" ;
    writeText();
  } else {
    if (regie[regienummer] == 2) {
      txt = inhalt[regienummer];
    writeText();
    } else { 
      if (regie[regienummer] == 3){
      document.getElementById('figur').src='';
      txt = inhalt[regienummer]; writeText();
    } else {
     if (regie[regienummer] == 41) {
     fun();
     }
    else {
      if (regie[regienummer] == 31) {
        document.getElementById('figur').src='t2.png';
      }
      else { if (regie[regienummer] == 6) {txt = inhalt[regienummer]; writeText();setTimeout(weiter, 800);}
      else { if (regie[regienummer] == 7) {document.getElementById("box").innerHTML = ""; setTimeout(weiter, 0);}} 
    }
    }} 
  }}
  regienummer ++;
}


var modal = document.getElementById("popUp");

function fun() {
modal.style.display = "inline";
modal.style.display = "block";
document.getElementById("choice1").innerHTML = choices[choicestart+1];
document.getElementById("choice2").innerHTML = choices[choicestart+2];
document.getElementById("choice3").innerHTML = choices[choicestart+3];
}

function skip(path){
 /*document.write(path)*/
 extra = (choices[choicestart])+choicestart+path;
 regienummer = choices[extra];
 modal.style.display = "none";
 weiter();
}

function autoweiter(){
  weiter();
}

</script>
</body>
</html>
